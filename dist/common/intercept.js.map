{"version":3,"file":"intercept.js","sources":["../../src/common/intercept.ts"],"sourcesContent":["import { shouldUpdate } from '../app'\n\nexport function interceptUpdate() {\n  return function (target: any, propertyKey: string, descriptor: PropertyDescriptor) {\n    const originalSet = descriptor.set\n\n    const originalGet = descriptor.get\n\n    descriptor.set = function (newValue) {\n      if (originalSet) {\n        const oldValue = originalGet?.call(this)\n        if (newValue !== oldValue) {\n          originalSet.call(this, newValue)\n          shouldUpdate()\n        }\n        else {\n          // console.warn([newValue, oldValue], '新旧值相同')\n        }\n      }\n    }\n\n    Object.defineProperty(target, propertyKey, descriptor)\n  }\n}\n"],"names":["shouldUpdate"],"mappings":";;;;;;;;SAEgB,eAAe,GAAA;AAC7B,IAAA,OAAO,UAAU,MAAW,EAAE,WAAmB,EAAE,UAA8B,EAAA;AAC/E,QAAA,MAAM,WAAW,GAAG,UAAU,CAAC,GAAG,CAAA;AAElC,QAAA,MAAM,WAAW,GAAG,UAAU,CAAC,GAAG,CAAA;AAElC,QAAA,UAAU,CAAC,GAAG,GAAG,UAAU,QAAQ,EAAA;YACjC,IAAI,WAAW,EAAE;gBACf,MAAM,QAAQ,GAAG,WAAW,EAAE,IAAI,CAAC,IAAI,CAAC,CAAA;AACxC,gBAAA,IAAI,QAAQ,KAAK,QAAQ,EAAE;AACzB,oBAAA,WAAW,CAAC,IAAI,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAA;AAChC,oBAAAA,gBAAY,EAAE,CAAA;iBAIf;aACF;AACH,SAAC,CAAA;QAED,MAAM,CAAC,cAAc,CAAC,MAAM,EAAE,WAAW,EAAE,UAAU,CAAC,CAAA;AACxD,KAAC,CAAA;AACH;;;;"}