{"version":3,"file":"ObservablePoint.js","sources":["../../src/coordinate/ObservablePoint.ts"],"sourcesContent":["import type { PointData } from './PointData'\nimport type { PointLike } from './PointLike'\n\nexport interface Observer<T> {\n  _onUpdate: (point?: T) => void\n}\n\nexport class ObservablePoint implements PointLike {\n  public _x: number\n  public _y: number\n  private readonly _observer: Observer<ObservablePoint> | null\n  constructor(observer: Observer<ObservablePoint> | null, x?: number, y?: number) {\n    this._x = x || 0\n    this._y = y || 0\n    this._observer = observer\n  }\n\n  public clone(observer?: Observer<ObservablePoint>): ObservablePoint {\n    return new ObservablePoint(observer ?? this._observer, this._x, this._y)\n  }\n\n  public set(x = 0, y = x): this {\n    if (this._x !== x || this._y !== y) {\n      this._x = x\n      this._y = y\n      this._observer?._onUpdate(this)\n    }\n    return this\n  }\n\n  public copyFrom(p: PointData): this {\n    if (this._x !== p.x || this._y !== p.y) {\n      this._x = p.x\n      this._y = p.y\n      this._observer?._onUpdate(this)\n    }\n    return this\n  }\n\n  public copyTo<T extends PointLike>(p: T): T {\n    p.set(this._x, this._y)\n    return p\n  }\n\n  public equals(p: PointData): boolean {\n    return (p.x === this._x) && (p.y === this._y)\n  }\n\n  get x(): number {\n    return this._x\n  }\n\n  set x(value: number) {\n    if (this._x !== value) {\n      this._x = value\n      this._observer?._onUpdate(this)\n    }\n  }\n\n  get y(): number {\n    return this._y\n  }\n\n  set y(value: number) {\n    if (this._y !== value) {\n      this._y = value\n      this._observer?._onUpdate(this)\n    }\n  }\n}\n"],"names":["ObservablePoint","_x","_y","_observer","constructor","observer","x","y","this","clone","set","_onUpdate","copyFrom","p","copyTo","equals","value"],"mappings":"mBAOaA,EACJC,GACAC,GACUC,UACjB,WAAAC,CAAYC,EAA4CC,EAAYC,GAClEC,KAAKP,GAAKK,GAAK,EACfE,KAAKN,GAAKK,GAAK,EACfC,KAAKL,UAAYE,CAClB,CAEM,KAAAI,CAAMJ,GACX,OAAO,IAAIL,EAAgBK,GAAYG,KAAKL,UAAWK,KAAKP,GAAIO,KAAKN,GACtE,CAEM,GAAAQ,CAAIJ,EAAI,EAAGC,EAAID,GAMpB,OALIE,KAAKP,KAAOK,GAAKE,KAAKN,KAAOK,IAC/BC,KAAKP,GAAKK,EACVE,KAAKN,GAAKK,EACVC,KAAKL,WAAWQ,UAAUH,OAErBA,IACR,CAEM,QAAAI,CAASC,GAMd,OALIL,KAAKP,KAAOY,EAAEP,GAAKE,KAAKN,KAAOW,EAAEN,IACnCC,KAAKP,GAAKY,EAAEP,EACZE,KAAKN,GAAKW,EAAEN,EACZC,KAAKL,WAAWQ,UAAUH,OAErBA,IACR,CAEM,MAAAM,CAA4BD,GAEjC,OADAA,EAAEH,IAAIF,KAAKP,GAAIO,KAAKN,IACbW,CACR,CAEM,MAAAE,CAAOF,GACZ,OAAQA,EAAEP,IAAME,KAAKP,IAAQY,EAAEN,IAAMC,KAAKN,EAC3C,CAED,KAAII,GACF,OAAOE,KAAKP,EACb,CAED,KAAIK,CAAEU,GACAR,KAAKP,KAAOe,IACdR,KAAKP,GAAKe,EACVR,KAAKL,WAAWQ,UAAUH,MAE7B,CAED,KAAID,GACF,OAAOC,KAAKN,EACb,CAED,KAAIK,CAAES,GACAR,KAAKN,KAAOc,IACdR,KAAKN,GAAKc,EACVR,KAAKL,WAAWQ,UAAUH,MAE7B"}