var t;!function(t){t.WEB="WEB",t.UNI_APP="UNI_APP",t.WX="WX"}(t||(t={}));class e{defaultTextStyle;canvas;ctx;constructor(t={textBaseline:"top",fontFamily:'"Microsoft YaHei"',textAlign:"left"}){this.defaultTextStyle=t}init(e,n){switch(function(){if("object"==typeof uni)return t.UNI_APP;if(/MicroMessenger/.test(navigator.userAgent))return t.WX;return t.WEB}()){case t.WEB:this.canvas=new OffscreenCanvas(e,n),this.ctx=this.canvas.getContext("2d");break;case t.UNI_APP:this.canvas=uni.createOffscreenCanvas(e,n),this.ctx=this.canvas.getContext("2d");break;case t.WX:this.canvas=wx.createOffscreenCanvas(e,n),this.ctx=this.canvas.getContext("2d")}}checkCtx(){if(!this.ctx)throw new Error("请先执行 init() 函数");return!0}text(t,e,n,i={}){if(!this.checkCtx())return;const s=Object.assign({},this.defaultTextStyle,i),a=this.ctx;if(s.color&&(a.fillStyle=s.color),s.textAlign&&(a.textAlign=s.textAlign),s.font)a.font=s.font;else{const t=s?.fontSize?`${s.fontSize}px`:"32px",e=s?.fontWeight||"normal";a.font=`${t} ${e} ${s.fontFamily}`}if(s?.maxWidth&&s?.lineHeight){const i=t.split(""),c=[];let o=[];for(let t=0;t<i.length;t++){const e=i[t];o.push(e);const n=o.join("");a.measureText(n).width>s.maxWidth?(o.pop(),c.push(o.join("")),o=[e]):t===i.length-1&&c.push(n)}for(let t=0;t<c.length;t++)a.fillText(c[t],e,n+t*s.lineHeight)}else a.fillText(t,e,n)}}export{e as Painter};
