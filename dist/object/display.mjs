import{ObservablePoint as t}from"../coordinate/ObservablePoint.mjs";import{ensureBetween as s}from"../utils.mjs";const i=new t(null),e=new t(null),o=new t(null),h=new t(null,1,1);class n{constructor(t={}){this.visible=!!t.visible,t.position?this.position=t.position:(this.x=t.x??0,this.y=t.y??0),t.scale&&(this.scale=t.scale),t.skew&&(this.skew=t.skew),t.pivot&&(this.pivot=t.pivot)}get __shouldUpdate(){return!(!this.visible||0===this.scale.x||0===this.scale.y||0===this.alpha)}get shouldUpdate(){return this.__shouldUpdate&&this._shouldUpdate}_dirty=!0;set dirty(t){this._dirty!==t&&(this._dirty=t)}get dirty(){return this._dirty}set x(t){this.x!==t&&(this.position.x=t)}get x(){return this.position.x}set y(t){this.y!==t&&(this.position.y=t)}get y(){return this.position.y}_position=new t(this,0,0);set position(t){this.position!==t&&this._position.copyFrom(t)}get position(){return this._position}_scale=h;set scale(s){this._scale===h&&(this._scale=new t(this,1,1)),"number"==typeof s?this._scale.set(s):this._scale.copyFrom(s)}get scale(){return this._scale===h&&(this._scale=new t(this,1,1)),this._scale}_skew=i;set skew(s){this._skew===i&&(this._skew=new t(this)),this._skew.copyFrom(s)}get skew(){return this._skew===i&&(this._skew=new t(this,0,0)),this._skew}_alpha=1;set alpha(t){this.alpha!==t&&(this._alpha=t,this._onUpdate())}get alpha(){return this._alpha}_rotation=0;set rotation(t){this.rotation!==t&&(this._rotation=t,this._onUpdate())}get rotation(){return this._rotation}_anchor=o;set anchor(s){this._anchor===o&&(this._anchor=new t(this,0,0)),"number"==typeof s?this._anchor.set(s):this._anchor.copyFrom(s)}get anchor(){return this._anchor===o&&(this._anchor=new t(this)),this._anchor}_pivot=e;set pivot(s){this._pivot===e&&(this._pivot=new t(this,0,0)),"number"==typeof s?this._pivot.set(s):this._pivot.copyFrom(s)}get pivot(){return this._pivot===e&&(this._pivot=new t(this)),this._pivot}_onUpdate(t){this.dirty=!0}_app=null;_visible=!0;get visible(){return this._visible}shouldUpdateBounds=!0;needUpdateBounds(){this.shouldUpdateBounds||(this.shouldUpdateBounds=!0)}render(t){this.shouldUpdateBounds&&(this._updateBounds(),this.shouldUpdateBounds=!1);const i=this.scale.x,e=this.scale.y,o=this.skew.x,h=this.skew.y,n=this.position.x,r=this.position.y,a=this.pivot.x,p=this.pivot.y,_=this.rotation,l=Math.cos(_),d=Math.sin(_),c=s(this.anchor.x,0,1),u=s(this.anchor.y,0,1),w=this.width*c,y=this.height*u,v=n-(a+w)*l*i+(p+y)*d*e,m=r-(a+w)*d*i-(p+y)*l*e,g=this._app?.dpr??1;t.setTransform(i*l+h*-d,i*d+h*l,o*l+e*-d,o*d+e*l,v*g,m*g);const k=this.position.clone();t.scale(g,g),this.position.set(0),this._render(t),this.position=k,t.resetTransform()}set visible(t){this._visible=t}onAdd(){}onRemove(){}}export{n as Display};
//# sourceMappingURL=display.mjs.map
