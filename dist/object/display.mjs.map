{"version":3,"file":"display.mjs","sources":["../../src/object/display.ts"],"sourcesContent":["import { Event } from '../common/event'\nimport { interceptUpdate } from '../common/intercept'\nimport type {\n  MaybePoint,\n} from '../position/point'\nimport {\n  Point,\n} from '../position/point'\nimport type { BaseStyle } from '../style/base-style'\nimport type { RenderImpl } from '../types'\n\n/**\n * [单位矩阵变化](https://developer.mozilla.org/zh-CN/docs/Web/API/CanvasRenderingContext2D/setTransform)\n */\nexport interface DisplayImpl {\n\n  angle?: number\n\n  scale?: MaybePoint\n\n  skew?: MaybePoint\n\n  anchor?: MaybePoint\n\n  visible?: boolean\n}\n\nexport abstract class Display implements Required<DisplayImpl> {\n  constructor() {\n\n  }\n\n  private _dirty = true\n\n  set dirty(value) {\n    if (this._dirty !== value)\n      this._dirty = value\n  }\n\n  get dirty() {\n    return this._dirty\n  }\n\n  abstract style: BaseStyle\n\n  private _visible = true\n\n  get visible() {\n    return this._visible\n  }\n\n  @interceptUpdate()\n  set visible(value) {\n    this._visible = value\n  }\n\n  private _angle = 0\n\n  get angle() {\n    return this._angle\n  }\n\n  set angle(value) {\n    this._angle = value\n  }\n\n  get x() {\n    return this.position.x\n  }\n\n  set x(val) {\n    this.position.x = val\n  }\n\n  get y() {\n    return this.position.y\n  }\n\n  set y(val) {\n    this.position.y = val\n  }\n\n  position = new Point([-Infinity, -Infinity])\n  skew = new Point([0, 0])\n  anchor = new Point([0, 0])\n  scale = new Point([1, 1])\n\n  onAdd() { }\n\n  onRemove() { }\n\n  abstract _render(ctx: CanvasRenderingContext2D): void\n\n  render(ctx: CanvasRenderingContext2D): void {\n    this._render(ctx)\n  }\n}\n"],"names":["Display","constructor","_dirty","dirty","value","this","_visible","visible","_angle","angle","x","position","val","y","Point","Infinity","skew","anchor","scale","onAdd","onRemove","render","ctx","_render","__decorate","interceptUpdate","prototype"],"mappings":"2JA2BsBA,EACpB,WAAAC,GAEC,CAEOC,QAAS,EAEjB,SAAIC,CAAMC,GACJC,KAAKH,SAAWE,IAClBC,KAAKH,OAASE,EACjB,CAED,SAAID,GACF,OAAOE,KAAKH,MACb,CAIOI,UAAW,EAEnB,WAAIC,GACF,OAAOF,KAAKC,QACb,CAGD,WAAIC,CAAQH,GACVC,KAAKC,SAAWF,CACjB,CAEOI,OAAS,EAEjB,SAAIC,GACF,OAAOJ,KAAKG,MACb,CAED,SAAIC,CAAML,GACRC,KAAKG,OAASJ,CACf,CAED,KAAIM,GACF,OAAOL,KAAKM,SAASD,CACtB,CAED,KAAIA,CAAEE,GACJP,KAAKM,SAASD,EAAIE,CACnB,CAED,KAAIC,GACF,OAAOR,KAAKM,SAASE,CACtB,CAED,KAAIA,CAAED,GACJP,KAAKM,SAASE,EAAID,CACnB,CAEDD,SAAW,IAAIG,EAAM,EAAEC,KAAWA,MAClCC,KAAO,IAAIF,EAAM,CAAC,EAAG,IACrBG,OAAS,IAAIH,EAAM,CAAC,EAAG,IACvBI,MAAQ,IAAIJ,EAAM,CAAC,EAAG,IAEtB,KAAAK,GAAW,CAEX,QAAAC,GAAc,CAId,MAAAC,CAAOC,GACLjB,KAAKkB,QAAQD,EACd,EA3CDE,EAAA,CADCC,KAGAzB,EAAA0B,UAAA,UAAA"}