{"version":3,"file":"display.js","sources":["../../src/object/display.ts"],"sourcesContent":["import type {\n  MaybePoint,\n} from '../position/point'\nimport {\n  Point,\n} from '../position/point'\nimport type { RenderImpl } from '../types'\n\n/**\n * [单位矩阵变化](https://developer.mozilla.org/zh-CN/docs/Web/API/CanvasRenderingContext2D/setTransform)\n */\nexport interface DisplayImpl {\n\n  angle?: number\n\n  scale?: MaybePoint\n\n  skew?: MaybePoint\n\n  anchor?: MaybePoint\n}\n\nexport abstract class Display implements Required<DisplayImpl> {\n  _angle = 1\n  _shouldUpdate = false\n\n  get angle() {\n    return this._angle\n  }\n\n  position: Point\n\n  constructor() {\n    this.position = new Point([-Infinity, -Infinity])\n    this.position.on('shouldUpdate', () => {\n      this._shouldUpdate = true\n    })\n  }\n\n  set angle(value) {\n    this._angle = value\n  }\n\n  skew = new Point([0, 0])\n  anchor = new Point([0, 0])\n  scale = new Point([1, 1])\n\n  onAdd() {\n    this._shouldUpdate = true\n  }\n\n  onRemove() {\n    this._shouldUpdate = true\n  }\n\n  abstract _render(ctx: CanvasRenderingContext2D): void\n\n  render(ctx: CanvasRenderingContext2D): void {\n    this._render(ctx)\n  }\n}\n"],"names":["Point"],"mappings":";;;;;;;MAsBsB,OAAO,CAAA;IAC3B,MAAM,GAAG,CAAC,CAAA;IACV,aAAa,GAAG,KAAK,CAAA;AAErB,IAAA,IAAI,KAAK,GAAA;QACP,OAAO,IAAI,CAAC,MAAM,CAAA;KACnB;AAED,IAAA,QAAQ,CAAO;AAEf,IAAA,WAAA,GAAA;AACE,QAAA,IAAI,CAAC,QAAQ,GAAG,IAAIA,oBAAK,CAAC,CAAC,CAAC,QAAQ,EAAE,CAAC,QAAQ,CAAC,CAAC,CAAA;QACjD,IAAI,CAAC,QAAQ,CAAC,EAAE,CAAC,cAAc,EAAE,MAAK;AACpC,YAAA,IAAI,CAAC,aAAa,GAAG,IAAI,CAAA;AAC3B,SAAC,CAAC,CAAA;KACH;IAED,IAAI,KAAK,CAAC,KAAK,EAAA;AACb,QAAA,IAAI,CAAC,MAAM,GAAG,KAAK,CAAA;KACpB;IAED,IAAI,GAAG,IAAIA,oBAAK,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAA;IACxB,MAAM,GAAG,IAAIA,oBAAK,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAA;IAC1B,KAAK,GAAG,IAAIA,oBAAK,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAA;IAEzB,KAAK,GAAA;AACH,QAAA,IAAI,CAAC,aAAa,GAAG,IAAI,CAAA;KAC1B;IAED,QAAQ,GAAA;AACN,QAAA,IAAI,CAAC,aAAa,GAAG,IAAI,CAAA;KAC1B;AAID,IAAA,MAAM,CAAC,GAA6B,EAAA;AAClC,QAAA,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,CAAA;KAClB;AACF;;;;"}