{"version":3,"file":"text.mjs","sources":["../../src/object/text.ts"],"sourcesContent":["import { interceptUpdate } from '../common/intercept'\nimport { TextStyle } from '../style/text-style'\nimport { createCanvasFontString, formatValue } from '../utils'\nimport { Display } from './display'\n\nexport class Text extends Display {\n  style: TextStyle\n  constructor(text: string, x: number, y: number) {\n    super()\n    this.style = new TextStyle()\n    this.position.x = x\n    this.position.y = y\n    this.text = text\n  }\n\n  private _text = ''\n\n  @interceptUpdate()\n  set text(text) {\n    console.log('text', text)\n    this._text = text\n  }\n\n  get text() {\n    return this._text\n  }\n\n  _render(ctx: CanvasRenderingContext2D) {\n    ctx.textBaseline = 'top'\n    ctx.fillStyle = this.style.fill\n    ctx.font = createCanvasFontString(this.style)\n    ctx.fontStretch = this.style.fontStretch\n    ctx.fontVariantCaps = this.style.fontVariantCaps\n    ctx.letterSpacing = formatValue(this.style.letterSpacing)\n    ctx.wordSpacing = formatValue(this.style.wordSpacing)\n    ctx.textAlign = this.style.textAlign\n    ctx.textBaseline = this.style.textBaseline\n\n    ctx.fillText(this.text, this.position.x, this.position.y)\n  }\n};\n"],"names":[],"mappings":";;;;;;;;;;;;;AAKM,MAAO,IAAK,SAAQ,OAAO,CAAA;AAC/B,IAAA,KAAK,CAAW;AAChB,IAAA,WAAA,CAAY,IAAY,EAAE,CAAS,EAAE,CAAS,EAAA;AAC5C,QAAA,KAAK,EAAE,CAAA;AACP,QAAA,IAAI,CAAC,KAAK,GAAG,IAAI,SAAS,EAAE,CAAA;AAC5B,QAAA,IAAI,CAAC,QAAQ,CAAC,CAAC,GAAG,CAAC,CAAA;AACnB,QAAA,IAAI,CAAC,QAAQ,CAAC,CAAC,GAAG,CAAC,CAAA;AACnB,QAAA,IAAI,CAAC,IAAI,GAAG,IAAI,CAAA;KACjB;IAEO,KAAK,GAAG,EAAE,CAAA;IAGlB,IAAI,IAAI,CAAC,IAAI,EAAA;AACX,QAAA,OAAO,CAAC,GAAG,CAAC,MAAM,EAAE,IAAI,CAAC,CAAA;AACzB,QAAA,IAAI,CAAC,KAAK,GAAG,IAAI,CAAA;KAClB;AAED,IAAA,IAAI,IAAI,GAAA;QACN,OAAO,IAAI,CAAC,KAAK,CAAA;KAClB;AAED,IAAA,OAAO,CAAC,GAA6B,EAAA;AACnC,QAAA,GAAG,CAAC,YAAY,GAAG,KAAK,CAAA;QACxB,GAAG,CAAC,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAA;QAC/B,GAAG,CAAC,IAAI,GAAG,sBAAsB,CAAC,IAAI,CAAC,KAAK,CAAC,CAAA;QAC7C,GAAG,CAAC,WAAW,GAAG,IAAI,CAAC,KAAK,CAAC,WAAW,CAAA;QACxC,GAAG,CAAC,eAAe,GAAG,IAAI,CAAC,KAAK,CAAC,eAAe,CAAA;QAChD,GAAG,CAAC,aAAa,GAAG,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,CAAA;QACzD,GAAG,CAAC,WAAW,GAAG,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,CAAA;QACrD,GAAG,CAAC,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,SAAS,CAAA;QACpC,GAAG,CAAC,YAAY,GAAG,IAAI,CAAC,KAAK,CAAC,YAAY,CAAA;AAE1C,QAAA,GAAG,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAA;KAC1D;AACF,CAAA;AAtBC,UAAA,CAAA;AADC,IAAA,eAAe,EAAE;AAIjB,CAAA,EAAA,IAAA,CAAA,SAAA,EAAA,MAAA,EAAA,IAAA,CAAA;;;;"}